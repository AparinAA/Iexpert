{% extends "base_generic.html" %}

{% block content %}

<h1 class="drop-shadow p-2 mb-4 mt-0 ml-0 rounded d-flex"><small>Форма оценки заявки</small></h1>

<div class="drop-shadow p-2 mb-4 mt-0 ml-0 rounded">
    <div class="p-2 ml-1"> <b> Заявка: </b> {{ scoreexpertall.application }} </div>
    <div class="p-2 ml-1"><b> Ссылка на документы заявки: </b> <a href="{{ scoreexpertall.application.link_archiv }}"  target="_blank" class="text-info">{{ scoreexpertall.application.link_archiv }} </a></div>
    <div class="p-2 ml-1"><b> Ссылка на подробные критерии: </b> <a href="{% url 'criteria_expert' %}" target="_blank" class="text-info"> Критерии экспертной комиссии </a></div>
</div>
<div class="drop-shadow p-2 mb-4 mt-0 ml-0 rounded">
    <h4> Оценки и комментарии экспертов </h4>
    {% for expert, score_and_comment in scoreexpertall.get_all_comments_and_scores.items %}
        <div class="list-unstyled hoverDiv">
            <p class="font-italic lead"> {{ expert }} </p>
                <table class="table table-sm table-responsive-lg">
                    <thead class="bg-light">
                        <tr>
                            <td scope="col" class="text-center"><i> Итоговая оценка эксперта </i></td>                
                            <td scope="col" class="text-center"><i> Оценка по критерию №1 </i></td>
                            <td scope="col" class="text-center"><i> Оценка по критерию №2 </i></td>
                            <td scope="col" class="text-center"><i> Оценка по критерию №3 </i></td>
                            <td scope="col" class="text-center"><i> Оценка по критерию №4 </i></td>
                            <td scope="col" class="text-center"><i> Оценка по критерию №5 </i></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            {% if score_and_comment.score is None %} 
                                <td class="table-danger text-danger text-center">
                                    <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/><path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/></svg>
                                </td>
                            {% else %} 
                                <td class="table-success text-center"> <b>{{ score_and_comment.score }}</b></td> 
                            {% endif %}
                            {% if score_and_comment.score1 is None %} 
                                <td class="table-danger text-danger text-center">
                                    <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/><path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/></svg>
                                </td>
                            {% else %} 
                                <td class="table-success text-center"> <b>{{ score_and_comment.score1 }}</b></td> 
                            {% endif %}
                            {% if score_and_comment.score2 is None %} 
                                <td class="table-danger text-danger text-center">
                                    <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/><path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/></svg>
                                </td>
                            {% else %} 
                                <td class="table-success text-center"> <b>{{ score_and_comment.score2 }}</b></td> 
                            {% endif %}
                            {% if score_and_comment.score3 is None %} 
                                <td class="table-danger text-danger text-center">
                                    <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/><path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/></svg>
                                </td>
                            {% else %} 
                                <td class="table-success text-center"> <b>{{ score_and_comment.score3 }}</b></td> 
                            {% endif %}
                            {% if score_and_comment.score4 is None %} 
                                <td class="table-danger text-danger text-center">
                                    <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/><path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/></svg>
                                </td>
                            {% else %} 
                                <td class="table-success text-center"> <b>{{ score_and_comment.score4 }}</b></td> 
                            {% endif %}
                            {% if score_and_comment.score5 is None %} 
                                <td class="table-danger text-danger text-center">
                                    <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/><path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/></svg>
                                </td>
                            {% else %} 
                                <td class="table-success text-center"> <b>{{ score_and_comment.score5 }}</b></td> 
                            {% endif %}
                        </tr>
                    </tbody>
                </table>
                <b>Комментарий:</b>  
                {% if score_and_comment.comment is None or score_and_comment.comment == ''%}
                    <span class="text-danger"> отстутствует </span>
                {% else %}
                    <br/>
                    <span style="overflow-wrap: break-word">{{ score_and_comment.comment }} </span>
                {%endif%}
        </div>
        <hr/>
    {% endfor %}
</div>

<form action="" method="post" class="drop-shadow p-2 mb-4 mt-0 ml-0 rounded">
    <h4> Комментарий ответственного секретаря по заявке  <b class="text-danger"> * </b></h4>
    <p><i> Оставьте общий комментарий по заявке (не более 2000 символов) </i></p>

    {% csrf_token %}
    <div class="mb-4">
        {{ form.comment_master.errors }}
        {{ form.comment_master }}
        <p><i> Проверьте ваш комментарий перед отправкой, после отправки редактирование будет недоступно </i></p>
        <input type="submit" value="Отправить" class="btn btn-secondary">
    </div>
</form>
{% endblock %}